{"version":3,"sources":["users.js"],"names":["$","configData","$detailsDiv","removeItemDetails","is","$prev","prev","hasClass","toggleClass","hide","displayItemDetails","itemId","itemData","rowSelector","toString","$lastDivOfRow","find","last","parent","removeClass","addClass","html","data","after","slideDown","on","event","preventDefault","target","get","ajaxUrl","action","endpoint","Number","done","fail","error","errorHtml","undefined","responseJSON","hmtl","responseText","show","jQuery","gmosso_endpoint_config_data"],"mappings":"CAGC,SAAUA,EAAGC,GACV,aAEA,IAAIC,EAAcF,EAAE,+CAEhBG,EAAoB,WACpB,GAAKD,EAAYE,GAAG,YAApB,CAGA,IAAIC,EAAQH,EAAYI,OACpBD,EAAME,SAAS,eACfF,EAAMG,YAAY,QAAQ,GAE9BN,EAAYO,SAGZC,EAAqB,SAAUC,EAAQC,GACvC,IAAIC,EAAc,8BACdF,EAAOG,WAAa,KACpBC,EAAgBf,EAAE,gBAAgBgB,KAAKH,GAAaI,OAAOC,SAE/DH,EAAcI,YAAY,QAE1BjB,EAAYiB,YAAY,QACpBJ,EAAcR,SAAS,SACvBL,EAAYkB,SAAS,QAGzBlB,EAAYmB,KAAKT,GACjBV,EAAYoB,KAAK,SAAUX,GAC3BI,EAAcQ,MAAMrB,GACpBA,EAAYsB,UAAU,MAW1BxB,EAAE,gEACgCyB,GAAG,SAAS,SAAUC,GACpDA,EAAMC,iBAEN,IACIhB,EADUX,EAAE0B,EAAME,QACDN,KAAK,WAAa,KAExB,OAAXX,IAIAT,EAAYoB,KAAK,YAAcX,EAKnCX,EAAE6B,IAAI5B,EAAW6B,QAAS,CACtBC,OAAQ9B,EAAW8B,OACnBC,SAAU/B,EAAW+B,SACrBrB,OAAQsB,OAAOtB,KAElBuB,MAAK,SAAUZ,GACZnB,IACAO,EAAmBC,EAAQW,EAAKD,SAEnCc,MAAK,SAAUC,GACZ,IAAIC,OACwBC,IAAvBF,EAAMG,aACPH,EAAMG,aAAajB,KAAKkB,KAAOJ,EAAMK,aAEzCtC,IACAO,EAAmBC,EAAQ0B,MAtC3BnC,EAAYE,GAAG,YACfD,IAGJD,EAAYwC,WAvCpB,CA6EEC,OAAQC","file":"users.min.js","sourcesContent":["/*jslint browser: true white:true*/\n/*global jQuery,gmosso_endpoint_config_data*/\n\n(function ($, configData) {\n    \"use strict\";\n\n    var $detailsDiv = $(\"<div class=\\\"table-cell details last\\\"></div>\");\n\n    var removeItemDetails = function() {\n        if (!$detailsDiv.is(\":visible\")) {\n            return;\n        }\n        var $prev = $detailsDiv.prev();\n        if ($prev.hasClass(\"table-cell\")) {\n            $prev.toggleClass(\"last\", true);\n        }\n        $detailsDiv.hide();\n    };\n\n    var displayItemDetails = function (itemId, itemData) {\n        var rowSelector = \".table-cell a[data-userid=\\\"\" +\n            itemId.toString() + \"\\\"]\";\n        var $lastDivOfRow = $(\"#table-items\").find(rowSelector).last().parent();\n\n        $lastDivOfRow.removeClass(\"last\");\n\n        $detailsDiv.removeClass(\"dark\");\n        if ($lastDivOfRow.hasClass(\"dark\")) {\n            $detailsDiv.addClass(\"dark\");\n        }\n\n        $detailsDiv.html(itemData);\n        $detailsDiv.data(\"userid\", itemId);\n        $lastDivOfRow.after($detailsDiv);\n        $detailsDiv.slideDown(300);\n    };\n\n    var toggleItemDetails = function() {\n        if ($detailsDiv.is(\":visible\")) {\n            removeItemDetails();\n            return;\n        }\n        $detailsDiv.show();\n    };\n\n    $(\".gmosso-endpoint-template-general \" +\n        \"#table-items .table-cell a\").on(\"click\", function (event) {\n        event.preventDefault();\n\n        var $target = $(event.target);\n        var itemId = $target.data(\"userid\") || null;\n\n        if (itemId === null) {\n            return;\n        }\n\n        if ($detailsDiv.data(\"userid\") === itemId) {\n            toggleItemDetails();\n            return;\n        }\n\n        $.get(configData.ajaxUrl, {\n            action: configData.action,\n            endpoint: configData.endpoint,\n            itemId: Number(itemId)\n        })\n        .done(function (data) {\n            removeItemDetails();\n            displayItemDetails(itemId, data.html);\n        })\n        .fail(function (error) {\n            var errorHtml = (\n                (error.responseJSON !== undefined) ?\n                error.responseJSON.data.hmtl : error.responseText\n            );\n            removeItemDetails();\n            displayItemDetails(itemId, errorHtml);\n        });\n    });\n\n}(jQuery, gmosso_endpoint_config_data));\n"]}